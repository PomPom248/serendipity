(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{195:function(e,t,a){e.exports=a.p+"static/media/logo.faabf044.png"},270:function(e,t,a){e.exports=a(489)},275:function(e,t,a){},277:function(e,t,a){},424:function(e,t,a){},447:function(e,t,a){},479:function(e,t,a){},481:function(e,t,a){},483:function(e,t,a){},485:function(e,t,a){},487:function(e,t,a){},489:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),i=a.n(c),s=(a(275),a(3)),l=a(7),o=a(10),u=a(9),m=a(11),h=(a(277),a(493)),p=a(36),d=a.n(p),f=function e(){var t=this;Object(s.a)(this,e),this.signup=function(e,a,n,r,c){return t.service.post("/signup",{username:e,password:a,email:n,host:r,musician:c}).then(function(e){return console.log(e),e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout",{}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/loggedin").then(function(e){return e.data})},this.edit=function(e,a,n,r){return t.service.post("/edit",{username:e,email:a,host:n,musician:r}).then(function(e){return e.data})};var a=d.a.create({baseURL:"".concat("https://serendipity-project.herokuapp.com/api","/auth"),withCredentials:!0});this.service=a},g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).auth=new f,a.state={loading:!0,toLogin:!1,toHome:!1,user:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.auth.loggedin().then(function(t){e.setState({loading:!1,user:t})}).catch(function(t){e.setState({loading:!1,toLogin:!0})})}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.loading,n=e.toLogin;e.toHome;return a?r.a.createElement("div",null,"Loading..."):n?r.a.createElement(h.a,{to:"/register"}):t?this.props.children(this.state.user):void 0}}]),t}(n.Component),E=a(491),v=a(15),b=a.n(v),y=a(494),C=a(182),O=a(28),j=a.n(O),D=function(){function e(t){var a=this;Object(s.a)(this,e),this.new=function(e){var t=new FormData;return Object.keys(e).forEach(function(a){return t.append(a,e[a])}),a.service.post("/new",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},this.edit=function(e,t,n,r,c,i,s,l,o,u,m,h){return a.service.post("/".concat(e,"/edit"),{artistData:t,email:n,originCity:r,musicStyle:c,artistDescription:i,instruments:s,favouritePlayCity:l,musicTrack:o,spotifyAccount:u,youtubeAccount:m,image:h}).then(function(e){return e.data})},this.delete=function(e){return a.service.get("/".concat(e,"/delete"),{}).then(function(e){return e.data})},this.getOne=function(e){return a.service.get("/".concat(e),{}).then(function(e){return e.data})},this.getAll=function(){return a.service.get("/all").then(function(e){return e.data})},this.service=d.a.create({baseURL:"".concat("https://serendipity-project.herokuapp.com/api","/musician"),withCredentials:!0})}return Object(l.a)(e,[{key:"addPicture",value:function(e){var t=new FormData;return t.append("image",e),this.service.post("/new",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})}}]),e}(),S=a(183),w=a.n(S),k=a(92),I=a.n(k),N=a(93),P=a.n(N),q=a(33),x=(a(139),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleDelete=function(t){e.service.delete(t).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},e.service=new D,e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.musician||[];return r.a.createElement(q.c,{naturalSlideWidth:60,naturalSlideHeight:80,visibleSlides:3,totalSlides:e.length},r.a.createElement(q.a,{className:"arrows"},r.a.createElement(I.a,{className:"arrow-icon"})),r.a.createElement(q.b,{className:"arrows"},r.a.createElement(P.a,{className:"arrow-icon"})),r.a.createElement(q.e,null,r.a.createElement("div",{className:"all-card"},e.map(function(e,t){return r.a.createElement(q.d,null,r.a.createElement("div",{key:t,className:"individual-cards"},r.a.createElement("img",{src:e.image,className:"musician-image",alt:"Artist's image"}),r.a.createElement("div",{className:"info-container"},r.a.createElement("h2",{className:"musician-name"},e.artistData.toUpperCase()),r.a.createElement("div",null,r.a.createElement(w.a,null),r.a.createElement("span",{className:"city"},e.originCity.toUpperCase())),r.a.createElement("span",{className:"titles"},"MUSIC STYLE ")," ",r.a.createElement("p",null,"    ",e.musicStyle.toString().replace(/,/g," / ").toUpperCase()),r.a.createElement("span",{className:"titles"},"INSTRUMENTS "),"  ",r.a.createElement("p",null,"    ",e.instruments.toString().replace(/,/g," / ").toUpperCase()),r.a.createElement("span",{className:"titles"},"FAVOURITE PLACE TO PLAY ")," ",r.a.createElement("p",null,e.favouritePlayCity.toUpperCase()),r.a.createElement("a",{href:e.spotifyAccount,target:"_blank",className:"music-accounts"},"SPOTIFY"),r.a.createElement("a",{href:e.youtubeAccount,target:"_blank",className:"music-accounts"},"YOUTUBE"))))}))))}}]),t}(n.Component)),A=function e(t){var a=this;Object(s.a)(this,e),this.new=function(e,t){return a.service.post("/new/".concat(e),{hostPlaceID:t}).then(function(e){return e.data})},this.delete=function(e){return a.service.get("/".concat(e,"/delete"),{}).then(function(e){return e.data})},this.getOne=function(e){return a.service.get("/".concat(e),{}).then(function(e){return e.data})},this.getAll=function(e){return a.service.get("/all/".concat(e),{}).then(function(e){return e.data})},this.service=d.a.create({baseURL:"".concat("https://serendipity-project.herokuapp.com/api","/requests"),withCredentials:!0})},T=a(8),L=a(184),F=a.n(L),M=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).sendRequest=function(){console.log(a.state),a.service.new(a.props.user.musicianID,a.props.placeID).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},a.state={user:{},placeID:null},a.service=new A,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user,placeID:this.props.placeID})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(T.a,{onClick:this.sendRequest,type:"submit",value:"Submit"}," ",r.a.createElement(F.a,null)))}}]),t}(n.Component),R=a(186),G=a.n(R),U=(a(424),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).beautifyDate=function(e){return console.log(e),new Date(e).toDateString()},a.state={user:null,myPlaces:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:this.props.user,myPlaces:this.props.place})}},{key:"render",value:function(){var e=this,t=this.props.places||[];return this.props.place&&t.push(this.props.place),r.a.createElement(q.c,{naturalSlideWidth:200,naturalSlideHeight:130,visibleSlides:3,totalSlides:t.length},r.a.createElement(q.e,null,t.map(function(t,a){if(t.availability)return r.a.createElement(q.d,null,r.a.createElement("div",{className:"card-host-place"},r.a.createElement("div",{className:"top-card"},r.a.createElement("div",null,r.a.createElement("h2",null,t.placeName),r.a.createElement("h1",{className:"address"},t.address)),r.a.createElement("div",{className:"date-container"},r.a.createElement("h3",null,r.a.createElement(G.a,null),t.initialTime,"-",t.finishingTime),r.a.createElement("h3",null,e.beautifyDate(t.date)))),r.a.createElement("hr",null),r.a.createElement("div",{className:"numbers-container"},r.a.createElement("div",null,r.a.createElement("span",{className:"number"},t.capacity," "),r.a.createElement("span",null,"CAPACITY")),r.a.createElement("div",null,r.a.createElement("span",{className:"number"},t.price,"$ "),r.a.createElement("span",null,"PRICE")),r.a.createElement("div",null,e.props.user.musician&&r.a.createElement(M,{user:e.props.user,placeID:t._id})))))})),r.a.createElement(q.a,null,r.a.createElement(I.a,null)),r.a.createElement(q.b,null,r.a.createElement(P.a,null)))}}]),t}(n.Component)),Y=function(e){function t(e){var a;return Object(s.a)(this,t),a=Object(o.a)(this,Object(u.a)(t).call(this,e)),console.log(a.props),a.authService=new f,a.state={user:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authService.loggedin().then(function(t){e.setState(Object(C.a)({},e.state,{user:t})),console.log(t)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.props.routename;return this.state.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{variant:"h6",color:"inherit"},"this is the ".concat(e)),r.a.createElement("div",null,r.a.createElement("h1",null," Profile Details "),r.a.createElement("p",null,r.a.createElement("span",null,"Username: "),this.state.user.username),r.a.createElement("p",null,r.a.createElement("span",null,"Email: "),this.state.user.email),r.a.createElement(E.a,{to:"/edit-profile"},r.a.createElement("button",null,"Edit Profile")))):r.a.createElement("h1",null,"No logedin")}}]),t}(n.Component),_=a(42),H=a(26),Z=function e(t){var a=this;Object(s.a)(this,e),this.new=function(e,t,n,r,c,i,s,l,o,u){return a.service.post("/new",{hostID:e,address:t,date:n,initialTime:r,finishingTime:c,price:i,capacity:s,location:l,placeName:o,hostPlaceID:u}).then(function(e){return e.data})},this.edit=function(e,t,n,r,c,i,s,l,o){return a.service.post("/".concat(e,"/edit"),{address:t,date:n,initialTime:r,finishingTime:c,price:i,capacity:s,location:l,placeName:o}).then(function(e){return e.data})},this.availability=function(e,t){return a.service.post("/".concat(e,"/availability"),{availability:t}).then(function(e){return e.data})},this.delete=function(e){return a.service.get("/".concat(e,"/delete"),{}).then(function(e){return e.data})},this.getOne=function(e){return a.service.get("/".concat(e),{}).then(function(e){return e.data})},this.getAll=function(){return a.service.get("/all",{}).then(function(e){return e.data})},this.service=d.a.create({baseURL:"".concat("https://serendipity-project.herokuapp.com/api","/host-place"),withCredentials:!0})},W=a(22),z=a.n(W),J=a(187),B=a.n(J),K=(a(447),a(490),a(467),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){console.log(e),e.preventDefault();var t=a.state,n=t.hostID,r=t.address,c=t.date,i=t.initialTime,s=t.finishingTime,l=t.price,o=t.capacity,u=t.location,m=t.placeName,h=t.availability,p=t.concertRequest;a.service.new(n,r,c,i,s,l,o,u,m,h,p).then(function(e){console.log(e),a.setState({hostID:"",address:"",date:"",initialTime:"",finishingTime:"",price:"",capacity:"",location:{latitude:0,longitude:0},placeName:"",redirect:!0,clean:!0},function(){a.props.update()})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(H.a)({},n,r))},a._suggestionSelect=function(e,t,n,r){console.log(a.state,"dentro del geocoder"),console.log(e,t,n,r),a.state.location.latitude=parseFloat(t),a.state.location.longitude=parseFloat(n),a.state.address=e},a.onChangeDate=function(e){console.log("Date: ",e),a.setState({date:e})},a.onChangeTime=function(e){console.log(e)},a.state={hostID:"",address:"",date:"",initialTime:"",finishingTime:"",price:"",capacity:"",location:{latitude:0,longitude:0},placeName:"",availability:"",concertRequest:"",redirect:!1,clean:!1},a.service=new Z,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.state.hostID=this.props.user._id,console.log(this.state.hostID)}},{key:"render",value:function(){return r.a.createElement("div",{className:"form-host-place-box"},r.a.createElement("h1",null,"Add your nice Place for a concert"),r.a.createElement("form",{onSubmit:this.handleFormSubmit,className:"form-add-host-place"},r.a.createElement(B.a,{publicKey:"pk.eyJ1IjoiZGRpZXpyIiwiYSI6ImNqb3ZuMGZ3cjFqa2YzcWxrYjBtNjJzaG4ifQ.cCFZkl39Hov3D-Ujeq74Cg",inputClass:"search-input",type:"search",onSuggestionSelect:this._suggestionSelect,country:"es",resetSearch:!1}),r.a.createElement(z.a,{placeholder:"Address",type:"text",name:"address",value:this.state.address,onChange:this.handleChange}),r.a.createElement(z.a,{type:"date",name:"date",value:this.state.date,onChange:this.handleChange}),r.a.createElement(z.a,{label:"Starting Time",type:"time",name:"initialTime",value:this.state.initialTime,onChange:this.handleChange,InputLabelProps:{shrink:!0}}),r.a.createElement(z.a,{label:"Finishing Time",type:"time",name:"finishingTime",value:this.state.finishingTime,onChange:this.handleChange,InputLabelProps:{shrink:!0}}),r.a.createElement(z.a,{placeholder:"Price \u20ac/per person",type:"number",name:"price",value:this.state.price,onChange:this.handleChange}),r.a.createElement(z.a,{placeholder:"Capacity",type:"number",name:"capacity",value:this.state.capacity,onChange:this.handleChange}),r.a.createElement(z.a,{fullWidth:!0,placeholder:"Name",type:"text",name:"placeName",value:this.state.placeName,onChange:this.handleChange}),r.a.createElement(b.a,{variant:"contained",color:"primary",type:"submit",value:"Submit"},"Create Host Place")))}}]),t}(n.Component)),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).getAllPlaces=function(){a.service.getAll().then(function(e){a.setState({listOfPlaces:e.hostPlace,listCopyPlaces:e.hostPlace})}).catch(function(e){return console.log(e)})},a.getOnePlace=function(e){console.log(e),a.service.getOne(e).then(function(e){console.log(e,"response"),a.setState({myPlace:e.hostPlace})})},a.filter=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(H.a)({},n,r),function(){var e=Object(_.a)(a.state.listOfPlaces).filter(function(e){return""===a.state.queryCity?(console.log("solo fecha"),e.date.includes(a.state.queryDate)):""===a.state.queryDate?(console.log("solo ciudad"),e.address.toLowerCase().includes(a.state.queryCity.toLowerCase())):e.date.includes(a.state.queryDate)&&e.address.toLowerCase().includes(a.state.queryCity.toLowerCase())});a.setState({listCopyPlaces:e})})},a.state={user:null,listOfPlaces:null,listCopyPlaces:null,queryDate:"",queryCity:""},a.service=new Z,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getAllPlaces(),this.getOnePlace(this.props.user._id),this.setState({user:this.props.user})}},{key:"render",value:function(){return console.log(this.props),r.a.createElement(r.a.Fragment,null,this.props.user.musician&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Search by..."),r.a.createElement("form",null,r.a.createElement(T.f,{name:"queryDate",value:this.state.queryDate,type:"date",onChange:this.filter,label:"Date",InputLabelProps:{shrink:!0}}),r.a.createElement(T.f,{value:this.state.queryCity,name:"queryCity",type:"text",onChange:this.filter,label:"City",InputLabelProps:{shrink:!0}}))),this.props.user.musician&&r.a.createElement(U,{places:this.state.listCopyPlaces,user:this.props.user}),this.props.user.host&&r.a.createElement(U,{place:this.state.myPlace,user:this.props.user}),this.props.user.host&&r.a.createElement(K,{update:this.getAllPlaces,user:this.props.user}))}}]),t}(n.Component),Q=a(94),$=a(77),V=function e(t){var a=this;Object(s.a)(this,e),this.new=function(e,t){return a.service.post("/new/".concat(e,"/").concat(t)).then(function(e){return e.data})},this.setCapacity=function(e){return a.service.post("/set-capacity",{capacity:e}).then(function(e){return e.data})},this.going=function(e,t){return a.service.post("/".concat(e,"/going")).then(function(e){return e.data})},this.notGoing=function(e,t){return a.service.post("/".concat(e,"/not-going")).then(function(e){return e.data})},this.getOne=function(e,t){return a.service.get("/".concat(e,"/").concat(t),{}).then(function(e){return e.data})},this.getAll=function(){return a.service.get("/all",{}).then(function(e){return e.data})},this.delete=function(e){return a.service.get("/".concat(e,"/delete"),{}).then(function(e){return e.data})},this.service=d.a.create({baseURL:"".concat("https://serendipity-project.herokuapp.com/api","/concerts"),withCredentials:!0})},ee=(a(479),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={city:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"form-search-concert"},r.a.createElement("h3",null,"Search Concert"),r.a.createElement("label",null,"Location"),r.a.createElement("hr",null),r.a.createElement(z.a,{placeholder:"Location",name:"searchCity",onChange:function(t){return e.props.filter(t)}}),r.a.createElement("br",null),r.a.createElement(z.a,{placeholder:"Date",type:"date",name:"searchDate",onChange:function(t){return e.props.filter(t)}}),r.a.createElement("label",null,"Genre"),r.a.createElement(z.a,{placeholder:"Genre",name:"searchGenre",onChange:function(t){return e.props.filter(t)}}))}}]),t}(n.Component)),te=a(75);a(481);function ae(){var e=Object(Q.a)(["\n  background: white;\n  color: #3f618c;\n  font-weight: 400;\n  padding: 5px;\n  border-radius: 2px;\n  width: 30vw;\n"]);return ae=function(){return e},e}var ne=Object($.d)({accessToken:"pk.eyJ1IjoiZGRpZXpyIiwiYSI6ImNqb3ZuMGZ3cjFqa2YzcWxrYjBtNjJzaG4ifQ.cCFZkl39Hov3D-Ujeq74Cg"}),re=[5],ce={height:"92vh",width:"85vw",display:"flex"},ie="mapbox://styles/mapbox/dark-v9",se=[-3.70379,40.416775],le=te.a.div(ae()),oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).filterConcerts=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(H.a)({},n,r),function(){var e=Object(_.a)(a.state.allConcerts).filter(function(e){var t=a.state.searchDate.toLowerCase(),n=a.state.searchGenre.toLowerCase(),r=a.state.searchCity.toLowerCase();return""===t&&""===n?e.hostID.address.toLowerCase().includes(r):""===r&&""===n?e.hostID.date.includes(t):""===r&&""===t?e.musicianID.musicStyle.toString().toLowerCase().includes(n):""===r?e.musicianID.musicStyle.toString().toLowerCase().includes(n)&&e.hostID.date.includes(t):""===t?e.musicianID.musicStyle.toString().toLowerCase().includes(n)&&e.hostID.address.toLowerCase().includes(r):""===n?e.hostID.date.includes(t)&&e.hostID.address.toLowerCase().includes(r):e.hostID.address.toLowerCase().includes(r)&&e.hostID.date.includes(t)&&e.musicianID.musicStyle.toString().toLowerCase().includes(n)});a.setState({filteredConcerts:e})})},a.markerClick=function(e,t){console.log(e,"DENTRO DE MARKER CLICK"),a.setState({concert:e},function(){return document.querySelector(".mapboxgl-popup").style.display="flex"})},a.onClickGoingConcert=function(e){a.service.going(a.state.concert._id).then(function(e){console.log(e.concert),a.setState({concert:e.concert})}).catch(function(e){return console.log(e)})},a.onClickNotGoingConcert=function(e){a.service.notGoing(a.state.concert._id).then(function(e){console.log(e.concert),a.setState({concert:e.concert})}).catch(function(e){return console.log(e)})},a.closePopup=function(e){console.log(e),document.querySelector(".mapboxgl-popup").style.display="none"},a.state={user:null,allConcerts:null,filteredConcerts:[],concert:null,searchCity:"",searchDate:"",searchGenre:""},a.service=new V,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.getAll().then(function(t){console.log(t),e.setState({allConcerts:Object(_.a)(t),filteredConcerts:Object(_.a)(t)})}).catch(function(e){return console.log(e)}),this.setState({user:this.props.user})}},{key:"render",value:function(){var e=this,t=this.state.concert;return this.state.filteredConcerts?r.a.createElement("div",{className:"map-container"},r.a.createElement(ee,{filter:this.filterConcerts}),r.a.createElement(ne,{style:ie,zoom:re,containerStyle:ce,center:se},r.a.createElement($.b,{type:"symbol",id:"marker",layout:{"icon-image":"marker-15"}},this.state.filteredConcerts.map(function(t){return r.a.createElement($.a,{key:t,coordinates:[t.hostID.location.longitude,t.hostID.location.latitude],onClick:e.markerClick.bind(e,t)})})),null!==t&&r.a.createElement($.c,{offset:{"bottom-left":[12,-38],bottom:[0,-38],"bottom-right":[-12,-38]},coordinates:[t.hostID.location.longitude,t.hostID.location.latitude]},r.a.createElement(le,null,r.a.createElement("div",{className:"pop-up-container"},r.a.createElement("div",null,r.a.createElement("button",{onClick:this.closePopup},"X"),r.a.createElement("h1",null,"Concert Place in ",t.hostID.placeName),r.a.createElement("p",null,"Capacidad:",t.capacity),r.a.createElement("p",null,t.hostID.price),r.a.createElement("p",null,t.hostID.address),r.a.createElement("p",null,t.hostID.date),r.a.createElement("p",null,t.hostID.finishingTime),r.a.createElement("p",null,t.hostID.initialTime)),r.a.createElement("div",null,r.a.createElement("h1",null,t.musicianID.artistData),r.a.createElement("div",null,t.musicianID.musicStyle.map(function(e){return r.a.createElement("span",null,e)})),r.a.createElement("a",{href:t.musicianID.musicTrack},"Music Track"),r.a.createElement("img",{src:t.musicianID.image}),r.a.createElement("p",null,t.musicianID.artistData),r.a.createElement("p",null,t.musicianID.instruments[0])),r.a.createElement("div",null,t.availability?r.a.createElement("button",{className:"btn-go-concert",onClick:this.onClickGoingConcert},"+"):r.a.createElement("button",{disabled:"true",className:"btn-go-concert",onClick:this.onClickGoingConcert},"+"),r.a.createElement("button",{className:"btn-go-concert",onClick:this.onClickNotGoingConcert},"-"))))))):r.a.createElement("p",null,"Loading map...")}}]),t}(n.Component),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.artistData,r=t.email,c=t.originCity,i=t.musicStyle,s=t.artistDescription,l=t.instruments,o=t.favouritePlayCity,u=t.musicTrack,m=t.spotifyAccount,h=t.youtubeAccount,p=t.image,d=t.file;console.log(d),a.service.new({artistData:n,email:r,originCity:c,musicStyle:i,artistDescription:s,instruments:l,favouritePlayCity:o,musicTrack:u,spotifyAccount:m,youtubeAccount:h,image:p,file:d}).then(function(e){a.setState({artistData:"",email:"",originCity:"",musicStyle:"",artistDescription:"",instruments:"",favouritePlayCity:"",musicTrack:"",spotifyAccount:"",youtubeAccount:"",image:"",file:null,redirect:!0},function(){a.props.update()})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(H.a)({},n,r))},a.handleChangeImage=function(e){a.setState({file:e.target.files[0]}),console.log(e.target.files[0])},a.state={user:{},artistData:"",email:"",originCity:"",musicStyle:"",artistDescription:"",instruments:"",favouritePlayCity:"",musicTrack:"",spotifyAccount:"",youtubeAccount:"",image:"",file:null,redirect:!1},a.service=new D,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Musician's Information"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(T.d,null,r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Artist Name",text:"text",name:"artistData",value:this.state.artistData,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Home City",text:"text",name:"originCity",value:this.state.originCity,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Music Style",text:"text",name:"musicStyle",value:this.state.musicStyle,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Tell us About You",text:"text",name:"artistDescription",value:this.state.artistDescription,onChange:this.handleChange,multiline:!0,rowsMax:"6"})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Instruments",text:"text",name:"instruments",value:this.state.instruments,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Favourite City to Play",text:"text",name:"favouritePlayCity",value:this.state.favouritePlayCity,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Music Track",text:"text",name:"musicTrack",value:this.state.musicTrack,onChange:this.handleChange})),r.a.createElement("h3",null,"Optional"),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Spotify Account",text:"text",name:"spotifyAccount",value:this.state.spotifyAccount,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Youtube Account",text:"text",name:"youtubeAccount",value:this.state.youtubeAccount,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement("input",{type:"file",name:"image",onChange:this.handleChangeImage})),r.a.createElement(T.a,{variant:"contained",color:"primary",type:"submit",value:"Submit"},"Save"))))}}]),t}(n.Component),me=(a(483),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).update=function(){a.service.getAll().then(function(e){a.setState({listOfMusicians:e.musician,listCopyMusician:e.musician},function(){console.log(a.state)})}).catch(function(e){return console.log(e)})},a.filter=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.value;a.setState(Object(H.a)({},n,r),function(){var e=Object(_.a)(a.state.listOfMusicians).filter(function(e){var t=e.instruments.toString().toLowerCase(),n=e.musicStyle.toString().toLowerCase(),r=a.state.queryInstruments.toLowerCase(),c=a.state.queryGenre.toLowerCase();return""===a.state.queryGenre?t.includes(r):""===a.state.queryInstruments?n.includes(c):t.includes(r)&&n.includes(c)});a.setState({listCopyMusician:e})})},a.state={user:null,listOfMusicians:null,listCopyMusician:null,queryGenre:"",queryInstruments:""},a.service=new D,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.update(),this.setState({user:this.props.user})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Search by..."),r.a.createElement("form",null,r.a.createElement(T.f,{name:"queryGenre",value:this.state.queryGenre,type:"text",onChange:this.filter,label:"Genre",InputLabelProps:{shrink:!0}}),r.a.createElement(T.f,{value:this.state.queryInstruments,name:"queryInstruments",type:"text",onChange:this.filter,label:"Instruments",InputLabelProps:{shrink:!0}})),r.a.createElement(x,{musician:this.state.listCopyMusician}),this.props.user.musician&&r.a.createElement(ue,{update:this.update}))}}]),t}(n.Component)),he=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).handleChange=function(t){var a=t.target,n=a.name,r=a.value,c=a.checked;"host"===n||"musician"===n?e.setState(Object(H.a)({},n,c)):e.setState(Object(H.a)({},n,r))},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password,c=a.email,i=a.host,s=a.musician;e.service.edit(n,r,c,i,s).then(function(e){console.log(e)}).catch(function(e){return console.log(e)})},e.state={username:"",email:"",host:"",musician:""},e.service=new f,e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Edit your Profile"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(T.d,null,r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Change your Username",text:"text",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(T.d,{item:!0},r.a.createElement(T.f,{placeholder:"Change your Email",text:"email",name:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(T.c,{control:r.a.createElement(T.e,{onChange:this.handleChange,value:this.state.host,checked:this.state.host,color:"primary",name:"host"}),label:"Do you wanna Host?"}),r.a.createElement(T.c,{control:r.a.createElement(T.e,{onChange:this.handleChange,value:this.state.musician,checked:this.state.musician,color:"primary",name:"musician"}),label:"Are you musician?"})),r.a.createElement(T.a,{variant:"contained",color:"primary",type:"submit",value:"Submit"},"Edit")))}}]),t}(n.Component),pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.setState({user:a.props.user})},a.onClickCreateConcert=function(e,t,n){a.concertService.new(e,t).then(function(e){console.log(e)}).catch(function(e){console.log(e)}),a.requestService.delete(n).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},a.handleDeleteRequests=function(e){a.requestService.delete(e).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})},a.state={user:{},requestID:{}},a.concertService=new V,a.requestService=new A,console.log(a.props.request,"DENTRO DE LA CARD"),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.request.musicianID,a=this.props,n=a.user,c=a.request;return console.log(this.props.request.musicianID,this.props),r.a.createElement("div",null,r.a.createElement("p",null,t.artistData," wants to play at yout nice Place!"),r.a.createElement("p",null,t.artistData),r.a.createElement("p",null,t.favouritePlayCity),r.a.createElement("p",null,t.instruments),r.a.createElement("p",null,t.musicStyle),r.a.createElement("button",{type:"submit",onClick:function(){return e.onClickCreateConcert(n.hostPlaceID,t._id,c._id)}},"Accept Request"),r.a.createElement("button",{type:"submit",onClick:function(){return e.handleDeleteRequests(c._id)}},"Deny Request"))}}]),t}(n.Component),de=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.setState({user:a.props.user}),a.getAll(a.props.user._id)},a.getAll=function(e){a.service.getAll(e).then(function(e){if(e.myrequests){var t=e.myrequests.concertRequest,n=[];t.forEach(function(e){a.service.getOne(e._id).then(function(e){n.push(e.request),a.setState({listOfRequests:n}),console.log(n)})})}else alert("Este host no tiene requests limpiar codifgo")})},a.state={user:{},listOfRequests:[]},a.service=new A,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.listOfRequests;return r.a.createElement(r.a.Fragment,null,t.map(function(t,a){return r.a.createElement(pe,{key:a,request:t,user:e.props.user})}))}}]),t}(n.Component),fe=(a(485),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.setState({user:a.props.user}),a.getOne(a.props.user._id,a.props.user.concerts)},a.getOne=function(e,t){for(var n=[],r=0;r<t.length;r++)a.service.getOne(e,t[r]).then(function(e){n.push(e),a.setState({listOfConcerts:n})})},a.beautifyDate=function(e){return new Date(e).toDateString()},a.state={user:null,listOfConcerts:null},a.service=new V,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.listOfConcerts||[];return console.log(t),r.a.createElement("div",null,r.a.createElement("h1",null,"Your Concerts"),t.map(function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement(T.b,{key:a,className:"card-host-place"},r.a.createElement("h3",null,t.hostID.placeName),r.a.createElement("h4",null,t.hostID.address),r.a.createElement("h4",null,t.hostID.initialTime,"h"),r.a.createElement("h4",null,t.hostID.finishingTime,"h"),r.a.createElement("h4",null,"Date: ",e.beautifyDate(t.hostID.date)),r.a.createElement("div",{className:"numbers-container"},r.a.createElement("span",null,"CAPACITY"),r.a.createElement("span",{className:"number"},t.hostID.capacity," "),r.a.createElement("span",null,"PRICE"),r.a.createElement("span",{className:"number"},t.hostID.price," ")),r.a.createElement("h3",null,t.musicianID.artistData),r.a.createElement("a",{href:t.musicianID.musicTrack},"Music Track")))}))}}]),t}(n.Component)),ge=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).logout=function(){e.authService.logout().then(function(){return e.setState({user:null})})},e.authService=new f,e.state={user:null},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"nav-bar-guay"},r.a.createElement("span",{className:"nav-title"},"SERENDIPITY"),this.props.user.musician||this.props.user.host?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{to:"/musicians"},r.a.createElement(b.a,null,"Musician")),r.a.createElement(E.a,{to:"/host-places"},r.a.createElement(b.a,null,"Host"))):null,this.props.user.host?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{to:"/requests"},r.a.createElement(b.a,null,"Request"))):null,r.a.createElement(E.a,{to:"/concerts"},r.a.createElement(b.a,null,"Concert")),r.a.createElement(E.a,{to:"/your-concerts"},r.a.createElement(b.a,null,"Your Concerts")),r.a.createElement(E.a,{to:"/about"},r.a.createElement(b.a,null,"About")),r.a.createElement(E.a,{to:"/profile"},r.a.createElement(b.a,null,"Profile")),r.a.createElement(E.a,{to:"/register"},r.a.createElement(b.a,{onClick:this.logout},"Logout"))),r.a.createElement(y.a,{exact:!0,path:"/about",render:function(){return r.a.createElement(Y,{routename:"about"})}}),r.a.createElement(y.a,{exact:!0,path:"/profile",render:function(){return r.a.createElement(Y,{user:e.props.user,routename:"profile"})}}),r.a.createElement(y.a,{exact:!0,path:"/host-places",render:function(){return r.a.createElement(X,{user:e.props.user})}}),r.a.createElement(y.a,{exact:!0,path:"/concerts",render:function(){return r.a.createElement(oe,{user:e.props.user})}}),r.a.createElement(y.a,{exact:!0,path:"/requests",render:function(){return r.a.createElement(de,{user:e.props.user})}}),r.a.createElement(y.a,{exact:!0,path:"/musicians",render:function(){return r.a.createElement(me,{user:e.props.user,routename:"musician"})}}),r.a.createElement(y.a,{exact:!0,path:"/edit-profile",component:he}),r.a.createElement(y.a,{exact:!0,path:"/your-concerts",render:function(){return r.a.createElement(fe,{user:e.props.user})}}))}}]),t}(n.Component),Ee=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).logout=function(){e.authService.logout().then(function(){return e.setState({user:null})})},e.authService=new f,e.state={user:null},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(g,null,function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge,{user:e}))})}}]),t}(n.Component),ve=a(30),be=a.n(ve),ye=a(56),Ce=a.n(ye),Oe=a(57),je=a.n(Oe);function De(){var e=Object(Q.a)(["\n    background-color: #a56f91;;\n    min-height: 32px;\n    padding: 8px 16px;\n    border-radius: 3px;\n    font-size:15px;\n"]);return De=function(){return e},e}var Se=te.a.button(De()),we=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){console.log(e),e.preventDefault();var t=a.state,n=t.username,r=t.password,c=t.email,i=t.host,s=t.musician;a.service.signup(n,r,c,i,s).then(function(e){console.log(e),a.setState({username:"",password:"",email:"",host:!1,musician:!1,redirect:!0})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,c=t.checked;"host"===n||"musician"===n?a.setState(Object(H.a)({},n,c)):a.setState(Object(H.a)({},n,r)),console.log(a.state)},a.state={username:"",password:"",email:"",host:!1,musician:!1,redirect:!1},a.service=new f,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state&&this.state.redirect?r.a.createElement(h.a,{to:"/"}):r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(be.a,{direction:"column",spacing:16,container:!0,alignItems:"center","justify-content":"center"},r.a.createElement(be.a,{item:!0},r.a.createElement(z.a,{placeholder:"Name",type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(z.a,{placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(z.a,{placeholder:"email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}))),r.a.createElement(be.a,{direction:"column",spacing:16,container:!0,alignItems:"center","justify-content":"center"},r.a.createElement(Ce.a,{control:r.a.createElement(je.a,{onChange:this.handleChange,value:this.state.host,checked:this.state.host,color:"primary",name:"host"}),label:"Do you wanna Host?"}),r.a.createElement(Ce.a,{control:r.a.createElement(je.a,{onChange:this.handleChange,value:this.state.musician,checked:this.state.musician,color:"primary",name:"musician"}),label:"Are you musician?"}),r.a.createElement(be.a,{item:!0},r.a.createElement(Se,{variant:"contained",color:"primary",type:"submit",value:"Submit"},"SIGNUP"))))}}]),t}(n.Component),ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.username,r=t.password;a.service.login(n,r).then(function(e){a.setState({username:"",password:"",redirect:!0})}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(H.a)({},n,r))},a.state={username:"",password:"",redirect:!1},a.service=new f,a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state&&this.state.redirect?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement(be.a,{direction:"column",spacing:16,container:!0,alignItems:"center"},r.a.createElement(be.a,{item:!0,xs:12},r.a.createElement(z.a,{placeholder:"Name",type:"text",name:"username",value:this.state.username,onChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(z.a,{placeholder:"password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(be.a,{item:!0},r.a.createElement(Se,{type:"submit",value:"Login"},"LOGIN")))))}}]),t}(n.Component),Ie=a(195),Ne=a.n(Ie),Pe=(a(487),function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:Ne.a,alt:""}),r.a.createElement("h1",null,"Serendipity"),r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"login-box"},r.a.createElement("h3",null,"LOGIN"),r.a.createElement(ke,null)),r.a.createElement("div",{className:"signup-box"},r.a.createElement("h3",null,"SIGNUP"),r.a.createElement(we,null))))}}]),t}(n.Component)),qe=a(495),xe=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(qe.a,null,r.a.createElement(y.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(Pe,null)}}),r.a.createElement(y.a,{path:"/",render:function(){return r.a.createElement(Ee,null)}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=a(492);i.a.render(r.a.createElement(Ae.a,null,r.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[270,2,1]]]);
//# sourceMappingURL=main.691ff694.chunk.js.map